!function e(t,n,o){function a(r,c){if(!n[r]){if(!t[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){var n=t[r][1][e];return a(n?n:e)},d,d.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(e,t,n){var o=e("./projects"),a=e("./project"),i=e("./editor");window.Socket=io.connect(),Socket.on("connect",function(e){null!==ROOM&&Socket.emit("room",ROOM)}),$(document).ready(function(){if($("#accordion").length>0&&a().initialize(),$("#project-list").length>0&&o().initialize(),$("body > #fileView").length>0){var e=i(!1);e.initialize(),$("#fileActions").html(e.renderFilePrimaryActions({data:{advance:!1}}))}$(document).on("click",".btn-ajax",function(e){e.preventDefault(),$.get($(this).attr("href"))}),$(document).on("click",".submit-ajax",function(e){e.preventDefault();var t=$(this).closest("form"),n=t.serialize(),o=$(this).data("url"),a=$(this).data("redirect");$.post(o,n).done(function(){a&&(document.location.href=a)})})})},{"./editor":2,"./project":4,"./projects":9}],2:[function(e,t,n){t.exports=function(e){var t;return{initialize:function(){var e=this.loadLocalOptions();return t=ace.edit("editor"),t.setReadOnly(!0),t.$blockScrolling=1/0,t.setTheme("ace/theme/tomorrow_night"),t.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.events(),e&&(t.setOptions({fontSize:e.fontSize+"px"}),t.getSession().setTabSize(e.tabSize),t.getSession().setUseWrapMode(e.wrap),$("input[name=fontSizeEditor]").val(e.fontSize),$("input[name=tabSizeEditor]").val(e.tabSize),$("input[name=wrapEditor]").prop("checked",e.wrap)),t},saveLocalOptions:function(e){if("undefined"==typeof localStorage)throw new Error("localStorage unsupported");localStorage.setItem("editor",JSON.stringify(e))},loadLocalOptions:function(){if("undefined"!=typeof localStorage)return JSON.parse(localStorage.getItem("editor"));throw new Error("localStorage unsupported")},events:function(){var n=this;$(document).on("click",".btn-edit-file",function(){t.setReadOnly(!1),$("#fileActions").html(n.renderFileSecondaryActions({data:{project:ROOM,filePath:NavPath,advance:e}}))}),$(document).on("click",".btn-save-file",function(){$.post("/projects/"+ROOM+"/files",{filePath:NavPath,fileContent:t.getValue()}).done(function(){$("#fileActions").html(n.renderFilePrimaryActions({data:{advance:e,project:ROOM,filePath:NavPath}})),t.setReadOnly(!0)})}),$(document).on("click",".btn-cancel-file",function(){$.get("/projects/"+ROOM+"/files",{filePath:NavPath}).done(function(o){t.setReadOnly(!0),t.setValue(o.fileContent,-1),$("#fileActions").html(n.renderFilePrimaryActions({data:{advance:e,project:ROOM,filePath:NavPath}}))})}),$(document).on("click",".btn-editor-options",function(e){e.preventDefault();var o=$("input[name=fontSizeEditor]").val(),a=$("input[name=tabSizeEditor]").val(),i=$("input[name=wrapEditor]").is(":checked");""!==o&&t.setOptions({fontSize:o+"px"}),""!==a&&t.getSession().setTabSize(a),t.getSession().setUseWrapMode(i),n.saveLocalOptions({fontSize:o,tabSize:a,wrap:i})})},renderFileSecondaryActions:_.template('<li><button class="btn btn-xs btn-primary btn-cancel-file"><i class="glyphicon glyphicon-remove"></i><span>Cancel</span></button></li><li><button class="btn btn-xs btn-success btn-save-file"><i class="glyphicon glyphicon-save"></i><span>Save</span></button></li><% if (data.advance){ %><li><button class="btn btn-xs btn-danger btn-delete-file"><i class="glyphicon glyphicon-trash"></i><span>Delete</span></button></li><% } %>'),renderFilePrimaryActions:_.template('<% if (data.advance){ %><li><a class="btn btn-primary btn-toggle-file" href="/projects/<%= data.project %>/file?path=<%= data.filePath %>" target="_blank"><i class="glyphicon glyphicon-new-window"></i><span>Fullscreen</span></a></li><% } %><li><button class="btn btn-primary btn-edit-file"><i class="glyphicon glyphicon-edit"></i><span>Edit</span></button></li>')}}},{}],3:[function(e,t,n){t.exports=function(e){var t=e.slice(1).split("/");return t[0]?t.unshift(ROOM):t=[ROOM],t}},{}],4:[function(e,t,n){var o=e("./formatNavpath"),a=e("./project/file"),i=e("./project/folder"),r=e("./project/treeDirectory"),c=e("./project/websocket");t.exports=function(){window.NavPath="/";var e;return{initialize:function(){e=this;var t=r(e);t.initialize(),e.events(),e.updateBreadcrumb(NavPath),a(t),i(t),c(e)},updateBreadcrumb:function(t){$("#folderView .breadcrumb").html(e.renderBreadcrumbs({data:{files:o(t)}}))},events:function(){$(document).on("click",".btn-show-app",function(e){e.preventDefault();var t=$(this).attr("href");$("iframe").is(":visible")||$("#contentAppShow").removeClass("hide").animate({bottom:0},1e3,function(){$(this).append(_.template('<iframe src="<%= data.url %>"></iframe>')({data:{url:t}}))})}).on("click",".btn-notshow-app",function(e){$("#contentAppShow").animate({bottom:"999px"},1e3,function(){$(this).addClass("hide").find("iframe").remove()})}).on("click",".btn-add-pkg",function(){var e=$(this).parent();$.get("/projects/"+ROOM+"/packages",{action:"add",name:e.find("[name=pkgName]").val(),version:e.find("[name=version]").val(),env:e.find("[name=env]").val()})}).on("click",".btn-config",function(){var e=$("#config");e.slideToggle("normal",function(){e.is(":visible")||e.removeAttr("style")})}).on("click",".btn-tree",function(){var e=$("#contentLeft");e.hasClass("opened")?e.animate({left:"-250px"},"normal",function(){e.removeAttr("style").removeClass("opened")}):e.animate({left:"0"},"normal").addClass("opened")}).on("click","#contentPrimary",function(e){var t=$("#contentLeft");"tree"!==e.target.id&&t.hasClass("opened")&&t.animate({left:"-250px"},"normal",function(){t.removeAttr("style").removeClass("opened")})})},renderBreadcrumbs:_.template("<% _.forEach(data.files, function(file) { %><li><%= file %></li><% }); %>"),renderLogs:_.template("<% _.forEach(data.logs, function(log) { %><%= log %><br/><% }); %>"),renderPackages:_.template('<% _.forEach(data.packages, function(pkg) { %><li class="list-group-item" data-pkg="<%= pkg.name %>"><a href="https://www.npmjs.com/package/<%= pkg.name %>" target="_blank"><%= pkg.name %> - <%= pkg.version %></a><div class="pull-right"><a class="btn btn-warning btn-ajax" href="/projects/'+ROOM+'/packages?name=<%= pkg.name %>&env=<%= pkg.env %>&action=delete"><i class="glyphicon glyphicon-trash"></i></a></div></li><% }); %>'),renderProcesses:_.template('<% _.forEach(data.processes, function(process) { %><li data-process="<%= process.pid %>"><a href="/projects/'+ROOM+'/scripts?name=<%= process.name %>&action=kill&pid=<%= process.pid %>" class="badge btn-ajax"><%= process.name %> <i class="glyphicon glyphicon-remove-circle"></i></a></li><% }); %>'),renderScripts:_.template('<% _.forEach(data.scripts, function(script) { %><li><a class="btn btn-primary btn-ajax" href="/projects/'+ROOM+'/scripts?name=<%= script %>&action=exec"><%= script %></a></li><% }); %>')}}},{"./formatNavpath":3,"./project/file":5,"./project/folder":6,"./project/treeDirectory":7,"./project/websocket":8}],5:[function(e,t,n){t.exports=function(e){$(document).on("click",".btn-add-file",function(t){t.preventDefault();var n=$(this),o=$(this).closest("form").find('input[name="fileName"]').val();$.get("/projects/"+ROOM+"/files",{filePath:NavPath+"/"+o,action:"add"}).done(function(t){e.updateTreeDir(t),n.closest(".modal").modal("hide")})}).on("click",".btn-delete-file",function(){$.get("/projects/"+ROOM+"/files",{filePath:NavPath,action:"delete"}).done(function(t){e.updateTreeDir(t,!1),e.unfoldView(!1)})})}},{}],6:[function(e,t,n){t.exports=function(e){$(document).on("click",".btn-add-folder",function(t){t.preventDefault();var n=$(this),o=$(this).closest("form").find('input[name="folderName"]').val();$.get("/projects/"+ROOM+"/folders",{folderPath:NavPath+"/"+o,action:"add"}).done(function(t){e.updateTreeDir(t,!0),n.closest(".modal").modal("hide")})}).on("click",".btn-rename-folder",function(t){t.preventDefault();var n=$(this),o=$(this).closest("form").find('input[name="folderName"]').val();$.get("/projects/"+ROOM+"/folders",{action:"rename",folderPath:NavPath,folderName:o}).done(function(t){NavPath="",e.updateTreeDir(t,!0),n.closest(".modal").modal("hide")})}).on("click",".btn-delete-folder",function(){$.get("/projects/"+ROOM+"/folders",{action:"delete",folderPath:NavPath}).done(function(t){NavPath="",e.updateTreeDir(t,!1)})})}},{}],7:[function(e,t,n){function o(){$('#folderActions li [data-target="#modalRenameFolder"]')["/"==NavPath?"addClass":"removeClass"]("hidden"),$("#folderActions li .btn-delete-folder")["/"==NavPath?"addClass":"removeClass"]("hidden")}function a(e){$("#fileView")[e?"fadeIn":"fadeOut"]("slow"),$("#folderView")[e?"fadeOut":"fadeIn"]("slow")}function i(){$(document).on("click",".node-tree",function(){var e=$(this),t=e.data("nodeid"),n=$("#tree").treeview("getNode",t);n.nodes&&($("#tree").treeview("selectNode",[n,{silent:!1}]),$("#tree").treeview("toggleNodeExpanded",[n,{silent:!1}]))})}var r=e("../formatNavpath"),c=e("../editor");t.exports=function(e){var t=e,n=c(!0).initialize(),s=0,l=0,d={data:TreeDir,showBorder:!1,collapseIcon:"glyphicon glyphicon-triangle-bottom",expandIcon:"glyphicon glyphicon-triangle-right",enableLinks:!0,highlightSelected:!1,onNodeSelected:function(e,i){NavPath="/"+i.href.slice(2),s=$("#tree").treeview("getNode",i.nodeId),l=$("#tree").treeview("getParent",i.nodeId).nodeId,i.nodes?($("#folderView .breadcrumb").html(t.renderBreadcrumbs({data:{files:r(NavPath)}})),o(),a(!1)):$.get("/projects/"+ROOM+"/files",{filePath:NavPath}).done(function(e){n.setValue(e.fileContent,-1),n.session.setMode("ace/mode/"+e.extension),n.setReadOnly(!0),$("#fileActions").html(c(!0).renderFilePrimaryActions({data:{advance:!0,project:ROOM,filePath:NavPath}})),a(!0)})}};return{initialize:function(){var e=$(location).attr("hash"),t=e.split(/\//),n=[],a=0;$("#tree").treeview(d),t.shift(),t.forEach(function(e){n=$('#tree a:contains("'+e+'")'),n.length>0&&(a=n.closest("li").data("nodeid"),["revealNode","selectNode","expandNode"].forEach(function(e){$("#tree").treeview(e,[a,{silent:!1}])}))}),i(),o()},updateTreeDir:function(e,n){n=n||!1,d.data=e.tree,TreeDir=e.tree,$("#tree").treeview(d),["revealNode","selectNode","expandNode"].forEach(function(e){$("#tree").treeview(e,[n?s:l,{silent:!1}])}),t.updateBreadcrumb(NavPath)},unfoldView:a}}},{"../editor":2,"../formatNavpath":3}],8:[function(e,t,n){t.exports=function(e){Socket.on("init",function(t){var n=_.findIndex(t,function(e){return e.name==ROOM});t[n]&&($(".console").append(e.renderLogs({data:{logs:t[n].logs}})).scrollTop($(".console")[0].scrollHeight),$("#processes").append(e.renderProcesses({data:{processes:t[n].processes}})))}).on("redirect",function(e){document.location.href=e}).on("config",function(e){$("textarea[name=configFile]").html(JSON.stringify(e,null,2))}).on("log",function(t){$(".console").append(e.renderLogs({data:{logs:[t]}})).scrollTop($(".console")[0].scrollHeight)}).on("cleanLogs",function(e){e&&$(".console").empty()}).on("process",function(t){$("#processes").append(e.renderProcesses({data:{processes:[t]}}))}).on("killProcess",function(e){$("[data-process="+e+"]").remove()}).on("pkgAdd",function(t){$(".pkg-list."+t.env).append(e.renderPackages({data:{packages:[t]}}))}).on("pkgDelete",function(e){$(".pkg-list."+e.env).find("[data-pkg="+e.name+"]").remove()}).on("packages",function(t){$(".pkg-list.dev").html(e.renderPackages({data:{packages:t.dev}})),$(".pkg-list.prod").html(e.renderPackages({data:{packages:t.prod}}))}).on("scripts",function(t){$("#scriptList").html(e.renderScripts({data:{scripts:t}}))})}},{}],9:[function(e,t,n){t.exports=function(){return{initialize:function(){var e=this;Socket.on("init",function(t){t.forEach(function(t){t.processes.length>0&&$("[data-project="+t.name+"] ul.processing").append(e.renderProcesses({data:{project:t.name,processes:t.processes}}))})}).on("killProcess",function(e){$("[data-process="+e+"]").remove()})},renderProcesses:_.template('<% _.forEach(data.processes, function(process) { %><li data-process="<%= process.pid %>"><a href="/projects/<%= data.project %>/scripts?name=<%= process.name %>&action=kill&pid=<%= process.pid %>" class="badge btn-ajax"><%= process.name %> <i class="glyphicon glyphicon-remove-circle"></i></a></li><% }); %>')}}},{}]},{},[1]);